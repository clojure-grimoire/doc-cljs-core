{:ns "cljs.repl.server", :name "send-and-close", :file "cljs/repl/server.clj", :type :fn, :src "(defn send-and-close\n  \"Use the passed connection to send a form to the browser. Send a\n  proper HTTP response.\"\n  ([conn status form]\n     (send-and-close conn status form \"text/html\"))\n  ([conn status form content-type]\n     (let [utf-8-form (.getBytes form \"UTF-8\")\n           content-length (count utf-8-form)\n           headers (map #(.getBytes (str % \"\\r\\n\"))\n                        [(status-line status)\n                         \"Server: ClojureScript REPL\"\n                         (str \"Content-Type: \"\n                              content-type\n                              \"; charset=utf-8\")\n                         (str \"Content-Length: \" content-length)\n                         \"\"])]\n       (with-open [os (.getOutputStream conn)]\n         (do (doseq [header headers]\n               (.write os header 0 (count header)))\n             (.write os utf-8-form 0 content-length)\n             (.flush os)\n             (.close conn))))))", :column 1, :line 107, :arglists ([conn status form] [conn status form content-type]), :doc "Use the passed connection to send a form to the browser. Send a\n  proper HTTP response."}